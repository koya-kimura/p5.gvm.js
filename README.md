# p5.gvm.js

`p5.gvm.js` は、視覚的なリズムを簡単に実現するためのp5.js向けライブラリです。このライブラリを使用すると、音楽的なテンポ（BPM）に基づいたアニメーションや動きを視覚的に表現できます。音を再生せずとも、リズミカルな視覚表現を作成することが可能です。

## 基本的な使い方

### 1. GVMインスタンスの作成

- ライブラリを使用するには、まずグローバルスコープでGVMクラスのインスタンスを作成します。
- インスタンス作成時にBPM（テンポ）を指定します。

```javaScript
let gvm = new GVM(120); // BPMを120に設定
```

### 2. BPMの変更

作成後にBPMを変更したい場合は、setBPM()関数を使用します。

```javaScript
gvm.setBPM(90); // BPMを90に変更
```

## 関数リファレンス

### 1. `getPhase()`
- 説明:
  - 現在のフェーズ値（進行度）を取得します。
  - この関数は、指定されたサイクル長（`cycleLength`）とイージングの持続時間（`easeDuration`）、およびイージング関数（`easeFunction`）に基づいて計算された値を返します。
  - フェーズ値は整数部分（ベースフェーズ）と小数部分（イージング適用済みの進行度）で構成されます。
  - デフォルトでは、1サイクルが8単位で進行し、そのうち最後の2単位がイージング適用区間となります。

- 引数:
  - `cycleLength`: サイクルの長さ（デフォルト値: `8`）。
  - `easeDuration`: イージングの持続時間。サイクル長より小さい正の値である必要があります（デフォルト値: `2`）。
  - `easeFunction`: 使用するイージング関数。デフォルトでは `Easing.easeInOutSine` が使用されます。
 
- 例:
  -  BPMを120に設定し `getPhase(8, 2)` とすると、BPM120のカウントで8拍中で後ろ2拍かけて1増えていく値を取ることができます。

### 2. `leapNoise()`
- 説明:
  - リズム（BPM）と連動したPerlin Noise値を生成します。
  - 現在のサイクルと次のサイクルで生成されるノイズ値をイージングによって補間し、滑らかなノイズパターンを得ることができます。
  
- 引数:
  - `cycleLength`: サイクルの長さ（デフォルト値: `8`）。
  - `easeDuration`: イージングの持続時間。サイクル長より小さい正の値である必要があります（デフォルト値: `2`）。
  - `seed`: ノイズ生成用のシード値。2つの要素 `[x, y]` を持つ配列で指定します。
  - `easeFunction`: 使用するイージング関数。デフォルトでは `Easing.easeInOutSine` が使用されます。
 
- 例:
  -  BPMを120に設定し `leapNoise(8, 2, [0, 0])` とすると、BPM120のカウントで8拍中で後ろ2拍かけて0~1の中で次のランダムな値へと変移する値を取ることができます。`[0,0]`はシード値です。

## イージング関数

このライブラリでは、以下のような多彩なイージング関数が利用可能です。これらはすべて静的メソッドとして提供され、引数として進行度（0〜1）を受け取り、それに対応する補間結果を返します。

### 主なイージング関数一覧

| 関数名                   | 説明                                                                 |
|--------------------------|----------------------------------------------------------------------|
| `Easing.easeInSine(x)`   | 緩やかに加速する動きを生成します。                                     |
| `Easing.easeOutSine(x)`  | 緩やかに減速する動きを生成します。                                     |
| `Easing.easeInOutSine(x)`| 加速と減速が滑らかにつながる動きを生成します。                         |
| `Easing.easeInQuad(x)`   | 二次曲線的に加速する動きを生成します。                                 |
| `Easing.easeOutQuad(x)`  | 二次曲線的に減速する動きを生成します。                                 |
| `Easing.easeInOutQuad(x)`| 加速と減速が二次曲線的につながる動きを生成します。                     |
| ...                      | その他、多くのイージング関数が利用可能です（詳細はコード参照）。           |

## ライセンス

MIT License

## 最新バージョン

v1.2.0

## 更新日

2025.02.04

## 作者
きむらこうや
